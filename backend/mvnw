#!/bin/sh
# Maven Wrapper Script

set -e

MAVEN_VERSION=3.9.5
BASE_URL=https://repo.maven.apache.org/maven2/org/apache/maven/apache-maven/${MAVEN_VERSION}

if [ -z "$MAVEN_HOME" ]; then
  MAVEN_HOME="$HOME/.m2/wrapper/maven-${MAVEN_VERSION}"
fi

if [ ! -d "$MAVEN_HOME" ]; then
  echo "Downloading Maven ${MAVEN_VERSION}..."
  mkdir -p "$MAVEN_HOME"

  if command -v curl > /dev/null; then
    curl -fsSL "${BASE_URL}/apache-maven-${MAVEN_VERSION}-bin.tar.gz" | tar xzf - -C "$MAVEN_HOME" --strip-components=1
  elif command -v wget > /dev/null; then
    wget -qO- "${BASE_URL}/apache-maven-${MAVEN_VERSION}-bin.tar.gz" | tar xzf - -C "$MAVEN_HOME" --strip-components=1
  else
    echo "Error: curl or wget is required"
    exit 1
  fi
fi

exec "$MAVEN_HOME/bin/mvn" "$@"